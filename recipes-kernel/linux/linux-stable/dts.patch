From 2af2bf93878c3ed2ae134faf509d3700274b9904 Mon Sep 17 00:00:00 2001
From: discord <julian.desvignes@telecom-sudparis.eu>
Date: Mon, 3 Oct 2016 15:40:49 +0200
Subject: [PATCH] dts for pwm

---
 arch/arm/boot/dts/BB-PWM0-00A0.dts    | 54 +++++++++++++++++++++++++
 arch/arm/boot/dts/BB-PWM1-00A0.dts    | 54 +++++++++++++++++++++++++
 arch/arm/boot/dts/BB-PWM2-00A0.dts    | 54 +++++++++++++++++++++++++
 arch/arm/boot/dts/Makefile            |  4 ++
 arch/arm/boot/dts/am33xx_pwm-00A0.dts | 74 +++++++++++++++++++++++++++++++++++
 5 files changed, 240 insertions(+)
 create mode 100644 arch/arm/boot/dts/BB-PWM0-00A0.dts
 create mode 100644 arch/arm/boot/dts/BB-PWM1-00A0.dts
 create mode 100644 arch/arm/boot/dts/BB-PWM2-00A0.dts
 create mode 100644 arch/arm/boot/dts/am33xx_pwm-00A0.dts

diff --git a/arch/arm/boot/dts/BB-PWM0-00A0.dts b/arch/arm/boot/dts/BB-PWM0-00A0.dts
new file mode 100644
index 0000000..1dfba56
--- /dev/null
+++ b/arch/arm/boot/dts/BB-PWM0-00A0.dts
@@ -0,0 +1,54 @@
+/*
+ * Copyright (C) 2016 Seeed Studio.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+/plugin/;
+
+/{
+    compatible = "ti,beaglebone", "ti,beaglebone-black", "ti,beaglebone-green";
+    part-number = "BB-PWM0";
+    version = "00A0";
+
+    fragment@0 {
+        target = <&am33xx_pinmux>;
+            __overlay__ {
+            pinctrl_spec: Panel_Pins {
+                    pinctrl-single,pins = <
+                        0x150 0x03 /* (A17) spi0_sclk.ehrpwm0A */
+                        0x154 0x03 /* (B17) spi0_d0.ehrpwm0B */
+                    >;
+                };
+            };
+    };
+
+fragment@1 {
+    target = <&ocp>;
+        __overlay__ {
+        test_helper: helper {
+            compatible = "bone-pinmux-helper";
+            pinctrl-names = "default";
+            pinctrl-0 = <&pinctrl_spec>;
+            status = "okay";
+        };
+    };
+};
+
+    fragment@2 {
+        target = <&epwmss0>;
+        __overlay__ {
+            status = "okay";
+        };
+    };
+
+    fragment@3 {
+        target = <&ehrpwm0>;
+        __overlay__ {
+            status = "okay";
+        };
+    };
+
+};
\ No newline at end of file
diff --git a/arch/arm/boot/dts/BB-PWM1-00A0.dts b/arch/arm/boot/dts/BB-PWM1-00A0.dts
new file mode 100644
index 0000000..ff45d15
--- /dev/null
+++ b/arch/arm/boot/dts/BB-PWM1-00A0.dts
@@ -0,0 +1,54 @@
+/*
+ * Copyright (C) 2016 Seeed Studio.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+/plugin/;
+
+/{
+    compatible = "ti,beaglebone", "ti,beaglebone-black", "ti,beaglebone-green";
+    part-number = "BB-PWM1";
+    version = "00A0";
+
+    fragment@0 {
+        target = <&am33xx_pinmux>;
+            __overlay__ {
+            pinctrl_spec: Panel_Pins {
+                    pinctrl-single,pins = <
+                        0x48 0x06 /* (U14) gpmc_a2.ehrpwm1A */
+                        0x4c 0x06 /* (T14) gpmc_a3.ehrpwm1B */
+                    >;
+                };
+            };
+    };
+
+fragment@1 {
+    target = <&ocp>;
+        __overlay__ {
+        test_helper: helper {
+            compatible = "bone-pinmux-helper";
+            pinctrl-names = "default";
+            pinctrl-0 = <&pinctrl_spec>;
+            status = "okay";
+        };
+    };
+};
+
+    fragment@2 {
+        target = <&epwmss1>;
+        __overlay__ {
+            status = "okay";
+        };
+    };
+
+    fragment@3 {
+        target = <&ehrpwm1>;
+        __overlay__ {
+            status = "okay";
+        };
+    };
+
+};
\ No newline at end of file
diff --git a/arch/arm/boot/dts/BB-PWM2-00A0.dts b/arch/arm/boot/dts/BB-PWM2-00A0.dts
new file mode 100644
index 0000000..ea8256d
--- /dev/null
+++ b/arch/arm/boot/dts/BB-PWM2-00A0.dts
@@ -0,0 +1,54 @@
+/*
+ * Copyright (C) 2016 Seeed Studio.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+/plugin/;
+
+/{
+    compatible = "ti,beaglebone", "ti,beaglebone-black", "ti,beaglebone-green";
+    part-number = "BB-PWM2";
+    version = "00A0";
+
+    fragment@0 {
+        target = <&am33xx_pinmux>;
+            __overlay__ {
+            pinctrl_spec: Panel_Pins {
+                pinctrl-single,pins = <
+                        0x020 0x04 /* P8_19 MODE4 ehrpwm2A PWM */
+                        0x024 0x04 /* P8_19 MODE4 ehrpwm2A PWM */
+                    >;
+                };
+            };
+    };
+
+fragment@1 {
+    target = <&ocp>;
+        __overlay__ {
+        test_helper: helper {
+            compatible = "bone-pinmux-helper";
+            pinctrl-names = "default";
+            pinctrl-0 = <&pinctrl_spec>;
+            status = "okay";
+        };
+    };
+};
+
+    fragment@2 {
+        target = <&epwmss2>;
+        __overlay__ {
+            status = "okay";
+        };
+    };
+
+    fragment@3 {
+        target = <&ehrpwm2>;
+        __overlay__ {
+            status = "okay";
+        };
+    };
+
+};
\ No newline at end of file
diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index faacd52..66f79cf 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -545,6 +545,10 @@ dtb-$(CONFIG_SOC_AM33XX) += \
 	am335x-shc.dtb \
 	am335x-sbc-t335.dtb \
 	am335x-sl50.dtb \
+	am33xx_pwm-00A0.dtb \
+	BB-PWM0-00A0.dtb \
+	BB-PWM1-00A0.dtb \
+	BB-PWM2-00A0.dtb \
 	am335x-wega-rdk.dtb
 dtb-$(CONFIG_ARCH_OMAP4) += \
 	omap4-duovero-parlor.dtb \
diff --git a/arch/arm/boot/dts/am33xx_pwm-00A0.dts b/arch/arm/boot/dts/am33xx_pwm-00A0.dts
new file mode 100644
index 0000000..4358b2f
--- /dev/null
+++ b/arch/arm/boot/dts/am33xx_pwm-00A0.dts
@@ -0,0 +1,74 @@
+/*
+ * Copyright (C) 2013 CircuitCo
+ * Copyright (C) 2013 Texas Instruments
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+/plugin/;
+
+/ {
+	compatible = "ti,beaglebone", "ti,beaglebone-black", "ti,beaglebone-green";
+
+	// identification
+	part-number = "am33xx_pwm";
+	version = "00A0";
+
+	fragment@0 {
+		target = <&epwmss0>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@1 {
+		target = <&ehrpwm0>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@2 {
+		target = <&ecap0>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@3 {
+		target = <&epwmss1>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@4 {
+		target = <&ehrpwm1>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@5 {
+		target = <&epwmss2>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@6 {
+		target = <&ehrpwm2>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+
+	fragment@7 {
+		target = <&ecap2>;
+		__overlay__ {
+			status = "okay";
+		};
+	};
+};
-- 
2.10.0

